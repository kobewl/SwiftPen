# SwiftPen 快速开始指南

## 📦 安装步骤

### 1. 安装依赖

```bash
npm install
```

### 2. 构建插件

```bash
# 开发模式（推荐）- 自动监听文件变化并重新编译
npm run dev

# 或生产构建
npm run build
```

### 3. 安装到 Obsidian

有两种方式：

#### 方式 A：符号链接（推荐用于开发）

```bash
# Windows (PowerShell 管理员模式)
New-Item -ItemType SymbolicLink -Path "你的Vault路径\.obsidian\plugins\swiftpen" -Target "D:\wangliang\SwiftPen"

# macOS/Linux
ln -s /path/to/SwiftPen /path/to/vault/.obsidian/plugins/swiftpen
```

#### 方式 B：复制文件

将以下文件复制到 `你的Vault路径\.obsidian\plugins\swiftpen\`：
- `main.js`
- `manifest.json`
- `styles.css`（如果有）

### 4. 启用插件

1. 打开 Obsidian
2. 进入设置 → 社区插件
3. 关闭安全模式（如果还没关闭）
4. 在已安装插件列表中找到 "SwiftPen"
5. 点击启用

## ⚙️ 配置

### 1. 设置 API Key

1. 在 Obsidian 设置中找到 "SwiftPen" 选项
2. 输入你的 OpenAI API Key
3. 可选：修改 Base URL（用于代理）

### 2. 调整参数（可选）

- **模型**：根据需求选择 GPT-3.5 或 GPT-4
- **最大生成长度**：默认 2000 tokens
- **创造性**：0.7（0=保守，2=创造性）
- **上下文长度**：
  - 光标前：4000 字符（推荐 2000-6000）
  - 光标后：1000 字符（推荐 500-1000）

## 🚀 使用

### 基本用法

1. 在笔记中写一些内容
2. 将光标放在想继续写的位置
3. 按快捷键 `Ctrl+Shift+L`（Windows）或 `Cmd+Shift+L`（macOS）
4. 在弹出框中输入需求，例如：
   - "继续写这一段"
   - "帮我总结上面的内容"
   - "用更专业的语气改写"
   - "列出 5 个要点"
5. 按 Enter 或点击"生成"

### 快捷键

- `Ctrl/Cmd+Shift+L`：打开 SwiftPen
- `Enter`：提交需求开始生成
- `Esc`：取消操作或中断生成

### 使用技巧

1. **提供清晰的上下文**
   - 在光标前写足够的背景信息
   - AI 会根据上下文理解你的写作风格

2. **明确的需求描述**
   - ✅ "继续写这一段，重点介绍技术优势"
   - ✅ "用更学术的语气改写上面的内容"
   - ❌ "写"
   - ❌ "继续"

3. **利用上下文**
   - 如果要改写，把要改的内容放在光标前
   - 如果要续写，把已有内容放在光标前
   - 光标后的内容也会被 AI 考虑，保持连贯

4. **中断和重试**
   - 如果不满意，按 Esc 停止生成
   - 可以撤销（Ctrl+Z）然后重新尝试
   - 调整需求描述后再次生成

## 🔧 故障排除

### 问题：插件没有出现

**解决方案**：
1. 确认文件都在正确的位置
2. 确认 `main.js` 和 `manifest.json` 存在
3. 重启 Obsidian
4. 检查控制台（Ctrl+Shift+I）是否有错误

### 问题：API Key 无效

**解决方案**：
1. 确认 API Key 正确复制（以 `sk-` 开头）
2. 检查 API Key 是否有效且有余额
3. 尝试在 OpenAI 网站测试 API Key

### 问题：生成速度慢

**解决方案**：
1. 使用 GPT-3.5 Turbo 模型（更快）
2. 减少上下文长度
3. 检查网络连接
4. 考虑使用代理

### 问题：生成内容不理想

**解决方案**：
1. 提供更多上下文
2. 更明确地描述需求
3. 调整"创造性"参数
4. 尝试不同的系统提示词
5. 使用 GPT-4 模型（更强）

### 问题：生成被中断

**解决方案**：
1. 检查是否遇到速率限制（429 错误）
2. 等待几秒后重试
3. 如果频繁出现，考虑升级 OpenAI 账户

## 🎯 使用场景

### 1. 写作续写
```markdown
人工智能正在改变我们的生活方式...
[光标]
```
需求：`继续写，举几个具体例子`

### 2. 内容扩展
```markdown
- 学习 TypeScript
[光标]
```
需求：`扩展成一个详细的学习计划`

### 3. 风格改写
```markdown
这个方法很好用，大家可以试试。
[光标]
```
需求：`改写成技术文档的风格`

### 4. 内容总结
```markdown
[一大段文字]
[光标]

总结：
```
需求：`用 3-5 句话总结上面的内容`

### 5. 翻译润色
```markdown
Today we learned about React hooks...
[光标]
```
需求：`翻译成中文并润色`

## 📊 性能优化

### Token 使用优化

- 合理设置上下文长度（不要太长）
- 使用更便宜的模型（GPT-3.5）
- 减少最大生成长度

### 速度优化

- 使用流式生成（已启用）
- 减少上下文长度
- 选择更快的模型
- 配置代理（如果在中国大陆）

## 🔐 安全建议

1. **API Key 安全**
   - 不要分享你的 vault 配置文件
   - 定期更换 API Key
   - 设置使用限额

2. **数据隐私**
   - 注意：内容会发送到 OpenAI 服务器
   - 不要用于高度敏感的内容
   - 考虑使用自托管的本地模型

3. **备份**
   - 定期备份你的笔记
   - AI 生成的内容可能需要人工审核

## 🆘 获取帮助

- 查看详细文档：[README.md](README.md)
- 提交问题：GitHub Issues
- 查看日志：Obsidian 控制台（Ctrl+Shift+I）

---

祝你使用愉快！如有问题，欢迎反馈。✨

