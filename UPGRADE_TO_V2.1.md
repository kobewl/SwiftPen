# 升级到 SwiftPen V2.1 指南

## 🎉 V2.1 新功能速览

SwiftPen V2.1 带来了多项用户体验改进！

### 核心改进

1. **🏷️ 生成标记** - AI 内容前后自动添加标记，清晰区分
2. **🧪 API 测试** - 一键测试 AI 连接是否正常
3. **⌨️ 快捷键说明** - 设置中显示所有快捷键
4. **✨ 视觉优化** - 更丰富的 Emoji 和状态提示
5. **🌍 翻译增强** - 显示语言名称和长度对比

## 🚀 快速升级

### 步骤 1：更新代码

```bash
# 拉取最新代码
git pull

# 或者如果你修改了代码
git stash
git pull
git stash pop
```

### 步骤 2：重新构建

```bash
npm run build
```

### 步骤 3：重启 Obsidian

关闭并重新打开 Obsidian，插件自动更新。

## ⚙️ 新功能配置

### 1. 配置生成标记

进入 **设置 → SwiftPen → 界面配置**

```
✅ 显示生成标记: 开启（推荐）
📝 生成开始标记: \n\n---AI 生成开始---\n\n
📝 生成结束标记: \n\n---AI 生成结束---\n\n
```

**效果预览**：
```markdown
这是我写的内容

---AI 生成开始---

这是 AI 生成的内容...

---AI 生成结束---

继续我的内容
```

### 2. 测试 API 连接

进入 **设置 → SwiftPen → API 测试**

1. 点击 "测试连接" 按钮
2. 等待 2-3 秒
3. 查看结果：
   - ✅ AI 连接测试成功！
   - ❌ 连接失败: [错误信息]

### 3. 查看快捷键

在 **设置 → SwiftPen → 快捷键** 部分可以看到：

```
默认快捷键：
• Ctrl/Cmd+Shift+L - 快速写作（AI 续写）
• Ctrl/Cmd+Shift+T - 翻译选中文本
• Esc - 取消当前操作
```

💡 提示：可在 Obsidian 设置 → 快捷键中自定义。

## 🎨 使用体验改进

### 改进 1：更清晰的内容区分

**之前**：
```markdown
我的原文 AI 生成的内容 继续原文
```
难以区分哪些是 AI 写的。

**现在**：
```markdown
我的原文

---AI 生成开始---
AI 生成的内容
---AI 生成结束---

继续原文
```
一目了然！

### 改进 2：更好的视觉反馈

**之前**：
```
正在生成内容...
✓ 已生成 123 个字符
```

**现在**：
```
🤖 AI 正在生成内容...
✨ 正在生成中...
✅ 生成完成！123 字符 / 45 词
```

### 改进 3：翻译信息更详细

**之前**：
```
正在翻译...
✓ 翻译完成
```

**现在**：
```
🌍 正在翻译...
✅ 翻译完成！已翻译为简体中文 (50 → 45 字符)
```

## 💡 推荐配置

### 配置 1：标准模式（推荐新手）

```yaml
显示生成标记: ✅ 开启
开始标记: \n\n---AI 生成开始---\n\n
结束标记: \n\n---AI 生成结束---\n\n
```

**优点**：
- 清晰明了
- 便于审阅
- 方便删除

### 配置 2：简洁模式（推荐熟练用户）

```yaml
显示生成标记: ✅ 开启
开始标记: \n\n<!-- AI -->\n\n
结束标记: \n\n<!-- /AI -->\n\n
```

**优点**：
- HTML 注释，渲染时隐藏
- 简洁不突兀
- 保持可追溯

### 配置 3：无标记模式

```yaml
显示生成标记: ❌ 关闭
```

**优点**：
- 完全无痕
- 追求简洁
- 信任 AI

## 🎯 实用场景

### 场景 1：学习笔记

```markdown
# TypeScript 学习笔记

今天学习了泛型的基础知识。

---AI 生成开始---

泛型（Generics）是 TypeScript 的一个重要特性...
[AI 详细解释]

---AI 生成结束---

我的理解：泛型就像是...
```

**优势**：
- 清楚哪些是 AI 解释
- 可以对比学习
- 便于后期修改

### 场景 2：API 故障排查

```
问题：AI 不工作

解决步骤：
1. 进入设置 → API 测试
2. 点击 "测试连接"
3. 看到：❌ 连接失败: API Key 无效
4. 检查并更正 API Key
5. 再次测试：✅ AI 连接测试成功！
6. 问题解决 ✓
```

### 场景 3：内容创作

```markdown
文章开头我自己写...

---AI 生成开始---
[AI 续写的中间部分]
---AI 生成结束---

结尾我自己总结...
```

**工作流**：
1. 写大纲和关键点
2. AI 扩展细节
3. 人工润色调整
4. 删除标记
5. 完成！

## ❓ 常见问题

### Q: 标记可以自定义吗？

**A**: 可以！在设置中完全自定义：

```markdown
<!-- 你的开始标记 -->
🤖 AI 助手：
━━━━━━━━━━
等等...
```

### Q: 标记会影响渲染吗？

**A**: 取决于你的标记：
- Markdown 标记：会显示
- HTML 注释：不会显示
- 自定义后自行测试

### Q: API 测试消耗 token 吗？

**A**: 消耗很少（约 50 tokens）：
- 只测试前 50 个字符
- 建议配置后测试 1 次
- 确认成功后无需频繁测试

### Q: 我不喜欢 Emoji 怎么办？

**A**: Emoji 在通知中，无法配置。
但不影响生成内容，只是视觉提示。

### Q: 可以回退到 V2.0 吗？

**A**: 可以：
```bash
git checkout v2.0.0
npm install
npm run build
```

但建议使用 V2.1，体验更好！

## 🔄 兼容性说明

### 完全兼容

- ✅ V2.0 的所有功能
- ✅ V2.0 的设置
- ✅ V2.0 的快捷键
- ✅ 无需重新配置

### 新增配置

V2.1 新增 3 个配置项：
```typescript
showGenerationMarkers: true
generationStartMarker: "\n\n---AI 生成开始---\n\n"
generationEndMarker: "\n\n---AI 生成结束---\n\n"
```

首次运行时自动添加默认值。

## 📊 改进对比

| 功能 | V2.0 | V2.1 | 改进程度 |
|------|------|------|----------|
| 内容区分 | ❌ | ✅ 标记 | ⭐⭐⭐⭐⭐ |
| API 测试 | ❌ | ✅ 一键 | ⭐⭐⭐⭐⭐ |
| 快捷键 | 需查文档 | 设置中显示 | ⭐⭐⭐⭐ |
| 视觉反馈 | 基础 | 丰富 | ⭐⭐⭐⭐ |
| 翻译反馈 | 简单 | 详细 | ⭐⭐⭐⭐ |

## 🎊 开始使用

现在你可以：

1. ✅ 享受清晰的内容标记
2. ✅ 快速测试 API 连接
3. ✅ 查看所有快捷键
4. ✅ 体验更好的视觉效果

## 📚 相关文档

- [V2.1 改进详解](docs/V2.1_IMPROVEMENTS.md)
- [完整更新日志](CHANGELOG.md)
- [主文档](README.md)

---

**SwiftPen V2.1 - 让 AI 写作更清晰、更可靠！** ✨

